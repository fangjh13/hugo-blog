<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Fython&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Fython&#39;s Blog">
<meta name="author" content="Fython">
<link rel="canonical" href="https://blog.fangjiahui.me/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.73c5f38ae8d9aaab6402bebf0c9459d0d8b9c7b018822bddcff46721198a28d5.css" integrity="sha256-c8XziujZqqtkAr6/DJRZ0Ni5x7AYgivdz/RnIRmKKNU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.fangjiahui.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.fangjiahui.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.fangjiahui.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.fangjiahui.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.fangjiahui.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.fangjiahui.me/posts/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Posts" />
<meta property="og:description" content="My Personal Blog Site" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.fangjiahui.me/posts/" /><meta property="og:image" content="https://blog.fangjiahui.me/blog-cover-1.png"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://blog.fangjiahui.me/blog-cover-1.png"/>

<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content="My Personal Blog Site"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.fangjiahui.me/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.fangjiahui.me/" accesskey="h" title="Fython&#39;s Blog (Alt + H)">Fython&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.fangjiahui.me/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://blog.fangjiahui.me/">Home</a></div>
  <h1>
    Posts
    <a href="/posts/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>cURL 命令 查看请求响应时间
    </h2>
  </header>
  <div class="entry-content">
    <p>cURL 是我们常用的 http 命令行请求工具，它支持显示请求开始到响应结束各阶段的耗时，以便于开发中排查问题是网络原因还是服务器处理慢原因，主要是利用 -w 参数
curl -L -w &#34;time_namelookup: %{time_namelookup} time_connect: %{time_connect} time_appconnect: %{time_appconnect} time_pretransfer: %{time_pretransfer} time_redirect: %{time_redirect} time_starttransfer: %{time_starttransfer} time_total: %{time_total} http_code: %{http_code} content_type: %{content_type} speed_download: %{speed_download} (byte/s) &#34; https://example.com/ 如果使用单行方便拷贝
curl -L -w &#34;time_namelookup: %{time_namelookup}\ntime_connect: %{time_connect}\ntime_appconnect: %{time_appconnect}\ntime_pretransfer: %{time_pretransfer}\ntime_redirect: %{time_redirect}\ntime_starttransfer: %{time_starttransfer}\ntime_total: %{time_total}\nhttp_code: %{http_code}\ncontent_type: %{content_type}\nspeed_download: %{speed_download} (byte/s)\n&#34; https://example.com/ 返回如下
&lt;!doctype html&gt; &lt;html&gt; ..... &lt;/html&gt; time_namelookup: 0.007911 time_connect: 0.008221 time_appconnect: 0.415794 time_pretransfer: 0.415880 time_redirect: 0.000000 time_starttransfer: 0.618522 time_total: 0.618948 http_code: 200 content_type: text/html; charset=UTF-8 speed_download: 2034 (byte/s) 返回的各参数如下，这是官方文档上的截图...</p>
  </div>
  <footer class="entry-footer"><span title='2023-11-26 18:34:20 +0800 +0800'>November 26, 2023</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;135 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to cURL 命令 查看请求响应时间" href="https://blog.fangjiahui.me/posts/2023-11-26-curl-http-timing/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>PostgreSQL 全文搜索
    </h2>
  </header>
  <div class="entry-content">
    <p>PostgreSQL 全文搜索 在数据量较小的项目中可以使用 PostgreSQL 自带的全文搜索（Full Text Search）支持，代替非常重的 ElasticSearch，减少开发和维护成本，简单又好用，记录下最近的学习
实现全文搜索主要分为几步，分词、向量化、创建索引（倒排索引）、匹配查询
分词 默认自带的分词配置是不支持中文的，但可以安装第三方扩展来支持，检查支持的配置库在 psql 中使用 \dF 命令，\dFp 列出解析器 。
postgres=&gt; \dF List of text search configurations Schema | Name | Description ------------&#43;------------&#43;--------------------------------------- pg_catalog | danish | configuration for danish language pg_catalog | dutch | configuration for dutch language pg_catalog | english | configuration for english language pg_catalog | portuguese | configuration for portuguese language pg_catalog | russian | configuration for russian language pg_catalog | simple | simple configuration pg_catalog | spanish | configuration for spanish language postgres-# \dFp List of text search parsers Schema | Name | Description ------------&#43;---------&#43;--------------------- pg_catalog | default | default word parser 安装支持中文的扩展 支持中文的扩展有以下这两个...</p>
  </div>
  <footer class="entry-footer"><span title='2023-02-11 11:38:27 +0800 +0800'>February 11, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;692 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to PostgreSQL 全文搜索" href="https://blog.fangjiahui.me/posts/2023-02-11-postgresql-full-text-search/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Go 服务性能分析 pprof 的使用
    </h2>
  </header>
  <div class="entry-content">
    <p>Go 服务性能分析 pprof 的使用 go 是主打性能的语言 所以官方集成了方便性能检测的工具 go tool pprof 方便好用，主要可以收集如下指标
profile : 程序 cpu 使用情况，按照一定频率去采集应用程序在 CPU 和寄存器上面的数据 heap : 程序 heap 内存使用情况，和调用关系 goroutine : 程序内 goroutine 启动数，各自的调用情况。 block : 报告导致阻塞的同步原语的情况 goroutines 不在运行状态的情况，可以用来分析和查找死锁等性能瓶颈。默认情况下未启用，需要手动调用runtime.SetBlockProfileRate启用。 mutex: 报告锁竞争。默认情况下未启用，需要手动调用runtime.SetMutexProfileFraction启用。 集成到服务 服务应用 常驻的服务型应用要使用 pprof 首先得在服务启动入口导入包
import _ &#34;net/http/pprof&#34; ··· go func() { log.Println(http.ListenAndServe(&#34;localhost:6060&#34;, nil)) }() 然后浏览器访问http://localhost:6060/debug/pprof/，显示如下页面
如上如果服务是 http 服务且使用的是 http.DefaultServeMux 不需要做任何路由注册默认会注册相关路由，初始化调用了init 函数会自动注册，路径为 /debug/pprof/，显示上图，能大概看个当前 goroutine 数目、堆分配情况、锁的情况，具体分析还是要使用下文的 go tool pprof 工具。
如果使用的是自定义的 ServeMux 或 Handler 需要我们自己手动注册需要的路由，比如使用 echo 框架的时候...</p>
  </div>
  <footer class="entry-footer"><span title='2022-12-16 10:51:46 +0800 +0800'>December 16, 2022</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1082 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to Go 服务性能分析 pprof 的使用" href="https://blog.fangjiahui.me/posts/2022-12-16-go-tool-pprof-tutorial/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>openwrt 自动重拨
    </h2>
  </header>
  <div class="entry-content">
    <p>有的 openwrt 固件不会断网自动重播，检查 /etc/ppp/options 文件是否存在如下参数，没有的话自己加上一般就好了
maxfail 0 persist 或者使用 crotab 重启接口，每天 3 点重新拨号
0 3 * * * ifdown wan &amp;&amp; sleep 3 &amp;&amp; ifup wan Reference: https://www.right.com.cn/FORUM/thread-4107089-1-1.html </p>
  </div>
  <footer class="entry-footer"><span title='2022-08-06 10:47:16 +0800 +0800'>August 6, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;28 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to openwrt 自动重拨" href="https://blog.fangjiahui.me/posts/2022-08-06-openwrt-auto-pppoe/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Go 中的类型和比较
    </h2>
  </header>
  <div class="entry-content">
    <p>Go 中的类型和比较 go 是一个强类型的语言，map 中要求键(key)必须是可比较的(comparable)，什么是可比较呢？就是能用操作符 == 的类型， 我们知道必须两个类型一致才能比较，否则编译器会报 invalid operation: a == c (mismatched types...) 的错误，准确的说基本类型（int8,float32,string）符合上面的原则，但 golang 中又有复合类型就不一样，先来看 go 中的类型
1. 基本类型 (Basic Types)
数字类型：
int8, uint8 (byte), int16, uint16, int32 (rune), uint32, int64, uint64, int, uint, uintptr.
float32, float64.
complex64, complex128.
布尔类型：
bool
字符串类型：
string
2. 复合类型 (Basic Types)
结构体(struct)类型
函数：go 中函数是一等公民，也是一种类型
数组(array)：包括长度和类型，不同长度的相同类型不属于同一类型
切片(slice)：切片有动态的长度和容量是一种引用类型
字典(map)：底层是哈希表也是一种引用类型
指针类型(pointer)
管道(channel)
接口类型(interface)
类型重定义(Type Definitions)和类型别名(Type Alias Declarations) 讲完了类型再来看看用户可以创建自己的类型（类型重定义）和创建别名，先看类型定义
// Define a solo new type. // type NewTypeName SourceType type MyInt int type Num int 上面定义了 MyInt , Num 两个类型，虽然他们的源类型都是 int 但他们是不同的类型，所以他们是不可以比较的，但可以通过转换成相同类型的再比较如...</p>
  </div>
  <footer class="entry-footer"><span title='2022-05-29 13:53:54 +0800 +0800'>May 29, 2022</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;730 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to Go 中的类型和比较" href="https://blog.fangjiahui.me/posts/2022-05-29-go-types-and-comparisons/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://blog.fangjiahui.me/posts/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://blog.fangjiahui.me/">Fython&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>

<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Fython&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Fython&#39;s Blog">
<meta name="author" content="Fython">
<link rel="canonical" href="https://blog.fangjiahui.me/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fe5e2aabdfff8eb553d92fe38c9df2462232b65718e9a34fc328f56fa92ba5fc.css" integrity="sha256-/l4qq9//jrVT2S/jjJ3yRiIytlcY6aNPwyj1b6krpfw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.fangjiahui.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.fangjiahui.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.fangjiahui.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.fangjiahui.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.fangjiahui.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.fangjiahui.me/posts/index.xml">
<link rel="alternate" hreflang="en" href="https://blog.fangjiahui.me/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://blog.fangjiahui.me/posts/">
  <meta property="og:site_name" content="Fython&#39;s Blog">
  <meta property="og:title" content="Posts">
  <meta property="og:description" content="My Personal Blog Site">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
      <meta property="og:image" content="https://blog.fangjiahui.me/blog-cover-1.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.fangjiahui.me/blog-cover-1.png">
<meta name="twitter:title" content="Posts">
<meta name="twitter:description" content="My Personal Blog Site">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.fangjiahui.me/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.fangjiahui.me/" accesskey="h" title="Fython&#39;s Blog (Alt + H)">Fython&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.fangjiahui.me/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://blog.fangjiahui.me/">Home</a></div>
  <h1>
    Posts
    <a href="/posts/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Bash 快捷操作
    </h2>
  </header>
  <div class="entry-content">
    <p>Bash 快捷操作 GUN Bash 是现代操作系统一般都默认自带的 Shell，它兼容 sh 并提供了更多的 feature，如果我们常用命令行那么记住一些快捷键和 trick 能大大提高我们的工作效率，这篇文章就介绍下本人常用的快捷键和一些技巧。
Bash 默认的是 emacs 模式，这里的快捷键以默认的为准，可以使用set -o命令查看，使用set -o emacs设置。
移动光标 快捷键 描述 Ctrl &#43; a 移动光标到行首 Ctrl &#43; e 移动光标到行尾 Alt &#43; b 移动光标后退一个单词（词首） Alt &#43; f 移动光标前进一个单词（词首） Ctrl &#43; f 光标前进一个字母 Ctrl &#43; b 光标后退一个字母 Ctrl &#43; xx 当前位置与行首之间光标切换 一般配合Ctrl的是单字符移动，Alt是单词为边界。建议将键盘上的caps lock键改成Ctrl这样手指移动距离更短按起来也更加舒服方便。
剪切（删除）粘贴 快捷键 描述 Ctrl &#43; k 剪切从光标到行尾 Ctrl &#43; u 剪切从光标到行首 Ctrl &#43; w 从光标向前剪切一个单词 Alt &#43; Backspace 与 Ctrl &#43; w 类似，但分隔符是一些特殊字符 Alt &#43; d 从光标向后剪切一个单词 Ctrl &#43; d 删除光标下一个字母，如果没有字符存在，ctrl&#43;d 则会登出该会话 Ctrl &#43; h 删除光标前一个字母 Alt &#43; t swap(当前单词, 上一个单词) Ctrl &#43; t swap(当前字母, 上一个字母) Ctrl &#43; y 粘贴上一次剪切的文本，配合 Ctrl-u、Ctrl-k 效果极好 大小写转换 快捷键 描述 Alt &#43; c 大写当前字母，并移动光标到单词尾 Alt &#43; u 大写从当光标到单词尾 Alt &#43; l 小写从当光标到单词尾 历史命令 快捷键 描述 Ctrl &#43; r 向后搜索历史命令 Ctrl &#43; g 退出搜索 Ctrl &#43; p 历史中上一个命令，代替向上方向键 Ctrl &#43; n 历史中下一个命令，代替乡下方向键 Alt &#43; . 上一个命令的最后一个单词 终端指令 快捷键 描述 Ctrl &#43; l 跳纸，换页，清屏 Ctrl &#43; m 回车（Carriage return） Ctrl &#43; s 停止输出（在 Zsh 中为向前搜索历史命令） Ctrl &#43; q 继续输出 Ctrl &#43; c 终止当前命令 Ctrl &#43; z 挂起当前命令 Ctrl &#43; d 结束输入（产生一个 EOF） Bang (!) 命令 快捷键 描述 !n 执行第 n 条命令 !-n 执行倒数第 n 条命令 !xx 执行最近的以 xx 开头的命令 !xx:p 和上面一样，但仅打印输出，而不执行命令 !! 执行上一条命令, 与 !-1 相同 !$ 上一条命令的最后一个参数，与 Alt &#43; .和$_相同 !:n 上一条命令的第 n 个参数，索引从 0 开始 !* 上一条命令的所有参数 !:1-$ 上一条命令的所有参数同 !* 相同 !-n:$ 倒数第 n 条命令的最后一个参数 !$:h 上一条命令参数的上一级 !#:1 当前行的第 1 个参数 !!:gs/aa/bb/ 替换上一条命令中所有的 aa 为 bb ^blah 删除上一条命令中的 blah ^blah^foo 将上一条命令中的 blah 替换为 foo 执行之前输入过的命令 经常我们会遇到当输入比较长的命令时执行了时，提示需要 sudo 运行，这个时候下面的技巧就很有用了
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-07-14 03:47:53 +0800 +0800'>July 14, 2020</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;459 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to Bash 快捷操作" href="https://blog.fangjiahui.me/posts/2020-07-14-bash-tip-and-tricks/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">UML 类图
    </h2>
  </header>
  <div class="entry-content">
    <p>UML 类图 统一建模语言（英语：Unified Modeling Language，缩写 UML）是非专利的第三代建模和规约语言。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法。UML展现了一系列最佳工程实践，这些最佳实践在对大规模，复杂系统进行建模方面，特别是在软件架构层次已经被验证有效。
以上是维基百科上对UML的定义，它定义了很多的图，本文主要介绍类图，是属于结构性图形中的静态图，本文所有图是通过OmniGraffle画的。
结构性图形（Structure diagrams）强调的是系统式的建模：
静态图（static diagram） 类图 对象图 包图 实现图（implementation diagram） 组件图 部署图 剖面图 复合结构图 行为式图形（Behavior diagrams）强调系统模型中触发的事件：
活动图 状态图 用例图 交互性图形（Interaction diagrams），属于行为图形的子集合，强调系统模型中的资料流程：
通信图 交互概述图（UML 2.0） 时序图（UML 2.0） 时间图（UML 2.0） 定义 UML类图是描述类的内部结构（属性, 方法等）和类与类之间的关系（泛化, 实现，组合, 聚合，关联，依赖），是一种静态结构图。是在面向对象程序设计中建模的常用方法，不仅是系统编码和测试的重要模型，以图的形式展示还可以简化人们对系统的理解。
格式 一般是用三层矩形框表示，第一层表示类的名称，第二层表示的是字段和属性，第三层则是类的方法，如果某一层没有则可以省略。第一层中，如果是抽象类，名称需用斜体显示。
属性和方法前面的符号（&#43;、#、-等）代表可见性
Public(&#43;) Protected(#) Private(-) Package(~) 第二层属性的格式是
可见性 名称 : 类型 [= 默认值]
第三层方法的格式是
可见性 名称(参数类型 参数, …) : 返回类型
类与类之间的关系 类图中类与类之间的关系主要由：继承、实现、依赖、关联、聚合、组合这六大类型。表示方式如下图：
泛化（generalization/extens） 泛化又称继承，是IS-A的关系，两个对象之间如果可以用IS-A来表示，就是继承关系：（..是..)
泛化关系用一条带空心箭头的实线表示；如下图表示（猫继承自动物）猫是（IS-A）动物
实现（realization/implements) 实现关系指的是一个class类实现interface接口（可以是多个）的功能，在Java中可以直接用关键字implements表示，在C&#43;&#43;中目标类可用抽象类表示
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-07-09 06:10:47 +0800 +0800'>July 9, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;105 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to UML 类图" href="https://blog.fangjiahui.me/posts/2020-07-09-uml-class-diagram/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Flask项目中集成Celery
    </h2>
  </header>
  <div class="entry-content">
    <p>Flask项目中集成Celery Celery是一个简单高效的实时分布式任务队列系统，我们可以将一些耗时比较长或者计算密集的任务交给celery处理，它也支持定时任务类似于crontab。而web应用中可以将一些任务丢给celery异步处理，比如发邮件消息推送、模型推理等。简单的Flask应用集成Celery比简单，有官方文档可做参考，可较复杂的flask应用如使用了蓝图(blueprint)分了很多模块的怎么组织celery和各种任务就比较复杂官方也没有说明文档，一不小心就会陷入循环导入。下面就介绍一种celery集成方法。
官方文档demo中有一个make_celery的函数
def make_celery(app): celery = Celery( app.import_name, backend=app.config[&#39;CELERY_RESULT_BACKEND&#39;], broker=app.config[&#39;CELERY_BROKER_URL&#39;] ) celery.conf.update(app.config) class ContextTask(celery.Task): def __call__(self, *args, **kwargs): with app.app_context(): return self.run(*args, **kwargs) celery.Task = ContextTask return celery 这个函数主要用来创建Celery对象，并从flask上更新一些配置加入上下文环境，像文档上单文件是不会出问题的返回的celery对象直接在下面定义任务，然后集成到路由中。如果你flask app是使用app factories和蓝图(blueprint)，那在这里定义的task又怎么在路由中引用呢，这就会导致循环引用问题。
我们可以把make_celery拆开来，首先创建celery对象然后等flask app初始化完成后在更新配置，这就解决问题了，任务单独放在tasks.py文件中也便于管理和查看
先来看最终项目结构图，就是flask web项目加入了celery
flask-celery-demo ├── app │ ├── api │ │ ├── __init__.py │ │ └── views.py # 视图 │ ├── __init__.py │ └── tasks.py # celery任务 ├── config.py ├── requirements.txt ├── run.sh └── service.py # 应用入口 先解释下主要service.py创建celery对象，然后把对象传入app/__init__.py文件中的create_app函数在里面更新celery配置。app/tasks.py单独存放给celery的任务，视图函数也可以方便导入。下面一个个文件说明
先来看service.py文件也是整个应用的主入口
from app import create_app def make_celery(app_name): broker = getattr(config[os.getenv(&#39;FLASK_ENV&#39;) or &#39;default&#39;], &#34;CELERY_BROKER_URL&#34;) backend = getattr(config[os.getenv(&#39;FLASK_ENV&#39;) or &#39;default&#39;], &#34;CELERY_BACKEND_URL&#34;) celery = Celery( app_name, broker=broker, backend=backend ) return celery # share celery object my_celery = make_celery(__name__) flask_app = create_app(os.getenv(&#39;FLASK_ENV&#39;) or &#39;default&#39;, celery=my_celery) 这里的make_celery函数只返回celery对象未更新配置，供tasks.py导入，并传给create_app，接下来看app/__init__.py文件
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-05-24 10:20:01 +0800 +0800'>May 24, 2020</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;238 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to Flask项目中集成Celery" href="https://blog.fangjiahui.me/posts/2020-05-24-flask-celery-integrated/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">TCP连接和各状态浅析
    </h2>
  </header>
  <div class="entry-content">
    <p>TCP连接和各状态浅析 TCP协议中三次握手连接和四次挥手断开和其中的状态变化
TCP(Transmission Control Protocol)协议在OSI模型中属于传输层的协议(第4层)也是最常用的互联网协议，与UDP相比它是一种可靠的传输协议，建立和断开连接中一共有11种可能发生的状态(states)。
Linux系统中可以用ss -nat命令查看所有TCP连接情况如果是旧的系统没有此命令可以使用netstat代替只是输出格式不一致，统计当前所有TCP状态可以加管道实现 ss -nat | awk &#39;NR&gt;1 { d[$1]&#43;&#43; } END { for (i in d) print i, d[i] }&#39;
建立连接(三次握手） TCP是面向连接的所以传输双方在传输前要建立一条连接后才能通信，建立连接后TCP协议提供全双⼯(就是可以同时发送和接收不影响)的通信服务。建立连接的过程我们给它取了个生动的名字叫“三次握手”，因为从发起到建立连接一共有三个步骤也就是双方会发三个包，先看下面的图
首先客户端发送SYN(Synchronous)包到服务端告诉服务器开始建立连接，包里面会包含一个随机数(j)序列号(Sequence Number)，此时客户端进入SYC-SENT状态。当然最初服务器是处于LISTEN状态监听某一个端口，本文图片以绿底黑框的都代表TCP状态。 服务端收到SYN发送应答SYN-ACK(Acknowledgement)携带确认号码(Acknowledge Number)为收到的序列号&#43;1也就是j&#43;1，加上一个自己的SYC序列号随机数(k)，服务端把状态置为SYN-RECEIVED 客户端收到SYN-ACK包并发送确认号码k&#43;1，此时客户端的状态为ESTABLISHED，服务器收到ACK后状态也变为ESTABLISHED 以下是wireshake抓包后TCP连接的三次握手，这里序列号码j和k都为0。
TCP A (port 65525) TCP B (port 443) LISTEN (Start) 1. SYN-SENT --&gt; &lt;SEQ=0&gt;&lt;CTL=SYN&gt; --&gt; SYN-RECEIVE 2. ESTABLISHED &lt;-- &lt;SEQ=0&gt;&lt;ACK=1&gt;&lt;CTL=SYN,ACK&gt; &lt;-- SYN-RECEIVE 3. ESTABLISHED --&gt; &lt;SEQ=1&gt;&lt;ACK=1&gt;&lt;CTL=ACK&gt; --&lt; ESTABLISHED 断开连接(四次挥手) 断开连接称为“挥手”一共有四步每一方向占两步，由于TCP是全双工的所以关闭连接需要双方都完成关闭(close)才算结束，其中会涉及状态也就比握手多。客户端和服务端都可以发起挥手动作，先发送FIN包的动作叫主动关闭(active close)然后另一方回应ACK包叫执行被动关闭(passive colse)，双方各完成一次主动和被动关闭一共四次。
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-13 03:38:51 +0800 +0800'>February 13, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;157 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to TCP连接和各状态浅析" href="https://blog.fangjiahui.me/posts/2020-02-13-tcp-handshake-process-and-state-trainsition/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">通过谷歌gRPC部署线上机器学习模型
    </h2>
  </header>
  <div class="entry-content">
    <p>通过谷歌gRPC部署线上机器学习模型 gRPC是谷歌开发的远程过程调用(RPC)系统，它使用HTTP/2通信，Protocol Buffer作为接口描述语言。分为服务端和客户端，跨平台不受语言限制。
本文主要在http服务中(以下代码使用的是flask)，使用gPRC Python远程调用训练好的模型返回RESTful接口，机器学习模型是一个已训练好的人脸检测模型(mtcnn)作为演示。
所有源码托管在github，可按需要查看获取，下文只列出部分主要的代码提供一些思路。
Proto定义 使用gRPC必须先使用protocol buffers定义序列化的结构包括各对象、服务等所有类型，之后通过grpcio-tools生成服务端和客户端可用的代码，使用proto3格式。首先定义存放图片的Image用于请求参数，也就是入参是一张图片
// request image message Image { bytes raw_data = 1; int32 height = 2; int32 width = 3; string image_id = 4; MetaData _meta_data = 5; } message Image定义了单张图片的存放格式主要包括raw_data存放图片二进制，还有图片的长高和唯一id，_meta_data记录各种元数据具体实现可查看上面github源码infer.proto
// each message Result message Result { Box box = 1; Landmarks landmarks = 2; double confidence = 3; } // return results message InferResults { string image_id = 1; MetaData _meta_data = 2; repeated Result results = 3; } message Result定义单张人脸格式每张人脸包括bounding box人脸框,landmarks5个点和置信度confidence，message InferResults定义了单张图上所有人脸和各种元数据。
// run inference service Inference { rpc Predict (Image) returns (InferResults) {} } service Inference定义了一个最简单的服务，输入一张图片输出是包含所有人脸信息的InferResults，就像一个函数调用一样，gRPC还支持复杂的服务比如streaming。
protobuf的具体格式可以查看谷歌官网介绍
定义完.proto文件后就可以生成客户端和服务端可用的接口了，需要安装grpcio-tools包。
python3 -m grpc_tools.protoc \ -I ./protos \ --python_out=./protos \ --grpc_python_out=./protos \ ./protos/infer.proto 以上命令会生成infer_pb2.py和infer_pb2_grpc.py两个文件。
infer_pb2.py中包含了我们在proto文件中定义的所有以message开头的类型，每个都是一个python类 infer_pb2_grpc.py中包含了在proto文件中以service开头的类型，包括服务端需要引用...Servicer的类重写方法，下文重写了Predict方法，add_...Servicer_to_server也是在服务端需要添加服务到grpc.Server，...Stub类是客户端需要导入的类与服务端交互。 加载模型启动gRPC服务 服务端主要是继承上文生成的infer_pb2_grpc.py中的InferenceServicer重写在infer.proto中定义的Predict方法，返回指定的类型也就是InferResults。
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-12-31 13:33:06 +0800 +0800'>December 31, 2019</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;517 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to 通过谷歌gRPC部署线上机器学习模型" href="https://blog.fangjiahui.me/posts/2019-12-31-python-web-grpc-inference/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://blog.fangjiahui.me/posts/page/3/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://blog.fangjiahui.me/posts/page/5/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://blog.fangjiahui.me/">Fython&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>

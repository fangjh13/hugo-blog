<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.140.0"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Fython&#39;s Blog</title>

<meta name="description" content="My Personal Blog Site">
<meta name="author" content="Fython">
<link rel="canonical" href="https://blog.fangjiahui.me/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fe5e2aabdfff8eb553d92fe38c9df2462232b65718e9a34fc328f56fa92ba5fc.css" integrity="sha256-/l4qq9//jrVT2S/jjJ3yRiIytlcY6aNPwyj1b6krpfw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.fangjiahui.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.fangjiahui.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.fangjiahui.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.fangjiahui.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.fangjiahui.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.fangjiahui.me/index.xml">
<link rel="alternate" type="application/json" href="https://blog.fangjiahui.me/index.json">
<link rel="alternate" hreflang="en" href="https://blog.fangjiahui.me/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://blog.fangjiahui.me/">
  <meta property="og:site_name" content="Fython&#39;s Blog">
  <meta property="og:title" content="Fython&#39;s Blog">
  <meta property="og:description" content="My Personal Blog Site">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
      <meta property="og:image" content="https://blog.fangjiahui.me/blog-cover-1.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.fangjiahui.me/blog-cover-1.png">
<meta name="twitter:title" content="Fython&#39;s Blog">
<meta name="twitter:description" content="My Personal Blog Site">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Fython's Blog",
  "url": "https://blog.fangjiahui.me/",
  "description": "My Personal Blog Site",
  "logo": "https://blog.fangjiahui.me/favicon.ico",
  "sameAs": [
      "https://github.com/fangjh13", "index.xml"
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.fangjiahui.me/" accesskey="h" title="Fython&#39;s Blog (Alt + H)">Fython&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.fangjiahui.me/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Mac Launchd 介绍和使用
    </h2>
  </header>
  <div class="entry-content">
    <p>Mac Launchd 介绍和使用 Linux 上如果想开机开机启动一个服务或者定时运行一个服务有很多的选择比如之前介绍过的Systemd或者用 crontab 也可以，而在 Mac 不同它有一个类似的叫 Launchd 的系统，对应使用launchctl命令控制
Daemons and Agents Launchd 管理 Daemons 和 Agents 两种类型分别存放在不同的文件夹下，主要的区别是
Agents 是用户登录后执行的 Daemons 是开机后就执行，可以通过UserName指定用户比如root用户 配置文件 Launchd 配置文件以.plist结尾，本质上是xml格式的文件，Daemons 和 Agents 各存放的路径也不同
类型 路径 说明 User Agents ~/Library/LaunchAgents 用户 Agents 当前用户登录时运行 Global Agents /Library/LaunchAgents 全局 Agents 任何用户登录时都会运行 System Agents /System/Library/LaunchAgents 系统 Agents 任何用户登录时都会运行 Global Daemons /Library/LaunchDaemons 全局 Daemons 内核初始化加载完后就运行 System Daemons /System/Library/LaunchDaemons 系统 Daemons 内核初始化加载完后就运行 系统运行开机首先会加载内核启动kernel_tas(0)，然后启动launchd(1)好后去启动指定好的 Daemons 最后用户登录再运行相应的 Agents 任务
一般文件名都以com.domain.programName.plist格式命名，不管是 Daemons 还是 Agents 格式都是一样的，只是存放位置不同。看下面一个 hello world 的例子 ~/Library/LaunchAgents/com.example.hello.plist
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-19 03:25:09 +0800 +0800'>April 19, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;334 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to Mac Launchd 介绍和使用" href="https://blog.fangjiahui.me/posts/2021-04-19-mac-launchd-daemons-and-agents-tutorial/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent"> Go 中的 Arrays 和 Slices
    </h2>
  </header>
  <div class="entry-content">
    <p>Golang 中的 Arrays 和 Slices 在 go 语言中，我们经常使用Slices类型因为它的方便和灵活，它和另一个Arrays类型有着密切的关系，Slices 是建立在 Arrays 的基础上的，搞明白它们的原理能使我们更加的轻松的使用它们
Arrays Arrays 和别的语言(C、Java)的类型一样，有固定的长度，在内存里是一块连续的空间，用以存储相同类型的 types。用如下方式申明
var array [5]int 像[size]T在 go 中申明array，size 是 type 的一部分 如上面的[5]int代表 5 个 int 元素的 Arrays，和另一个如[10]int是不同的类型，Arrays 有确定的长度。并且申明之后带默认值(各类型的零值)。也可以使用[...]符号省略 size 申明，编译器自动计算 如array := [...]int{1, 2, 3, 4, 5} 变量array引用的是整个 Array 而不是 Array 的第一个元素，如果将一个数组另外赋值是将这个数组拷贝了一份，数组作为函数参数也是将整个数组拷贝一份，非引用数组的指针 Slices 就是因为 Arrays 比较难用，go 在此基础上建立了 Slices，它是可以动态调整长度(dynamically-sized)的描述 Arrays 一部分的 types，Slices 可以使用切片数组的方式得到
array := [5]int{1, 2, 3, 4, 5} // Arrays var slice = array[1:4] // same as `var slice []int = array[1:4]` fmt.Println(slice) // [2 3 4] fmt.Println(len(slice)) // 3 fmt.Println(cap(slice)) // 4 array[2] = 9 fmt.Println(slice) // [2 9 4] slice = slice[:4] fmt.Println(slice) // [2 9 4 5] fmt.Println(array) // [1 2 9 4 5] Slices 的底层指向的是 Arrays，它描述底层一部分的 Arrays，如果被引用的 array 变化了，引用它的所有 slice 都会随之变化 Slices 有长度(length)和容量(capacity)，分别通过len和cap获取，长度就是切片的长度，容量是从 slice 的第一个元素到底层引用的 Arrays 的末尾元素的个数，也就是这个 slices 最大能达到的长度，例如上面的 slice 从第二个元素2到引用底层 array 末尾的元素5所以 cap 等于 4，所以 slices 可以动态调整但不能大于它的容量 将整个 Arrays 转化成 Slices 可以忽略前后索引slice := array[:]。Slices 以[]T的形式申明
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-08 03:17:59 +0800 +0800'>April 8, 2021</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;507 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to  Go 中的 Arrays 和 Slices" href="https://blog.fangjiahui.me/posts/2021-04-08-go-arrays-and-slices/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Bash备忘录
    </h2>
  </header>
  <div class="entry-content">
    <p>BASH SHELL cheat sheet 记录一些 bash shell 脚本的奇技淫巧，都是从实际使用中 google 的。bash 各 Linux 发行版都自带方便好用特别是文本处理、一些运维之类的小脚本，但有些语法繁琐不好记容易忘整理一下方便查找。
trap trap 命令 用于指定在接收到信号后将要采取的动作，常见的用途是在脚本程序被中断时完成清理工作。当 shell 接收到 sigspec 指定的信号时，arg 参数（命令）将会被读取，并被执行。例如：
trap &#34;exit 1&#34; HUP INT PIPE QUIT TERM 表示当 shell 收到HUP,INT,PIPE,QUIT,TERM这几个信号时，当前执行的程序会读取参数&#34;exit 1&#34;，并将它作为命令执行。
如果要忽略某个信号就参数使用单引号就可以&#39;&#39;
trap &#39;&#39; signals 如果启动的时候忽略了信号比如使用了nohup，trap 命令是无效的。具体信号可使用man 7 signal或者kill -l查阅
$*、$@、$# 直接上例子看，如下脚本test.sh
echo 参数总个数 \$#: $# echo 第0个参数 \$0: $0 for a in $(seq 1 $#); do eval b=\$$a echo 第&#34;$a&#34;个参数 \$&#34;$a&#34;: $b done echo -e &#34;\nUsing \&#34;\$#\&#34;:&#34; echo &#34;$#&#34; echo -e &#34;\nUsing \$#:&#34; echo $# echo -e &#34;\nUsing \&#34;\$*\&#34;:&#34; for a in &#34;$*&#34;; do echo $a; done echo -e &#34;\nUsing \$*:&#34; for a in $*; do echo $a; done echo -e &#34;\nUsing \&#34;\$@\&#34;:&#34; for a in &#34;$@&#34;; do echo $a; done echo -e &#34;\nUsing \$@:&#34; for a in $@; do echo $a; done 然后运行此脚本，注意最后3 4用了双引号
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-20 07:50:48 +0800 +0800'>January 20, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;415 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to Bash备忘录" href="https://blog.fangjiahui.me/posts/2021-01-20-bash-shell-cheat-sheet/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">使用kubeadm在虚拟机本地搭建Kubernetes集群
    </h2>
  </header>
  <div class="entry-content">
    <p>使用kubeadm在虚拟机本地搭建Kubernetes集群 本文使用ESXi创建3台ubuntu server 虚拟机搭建一个完整的Kubernetes集群，1台master主节点，2台worker做为工作节点。很多地址都是google的域名，安装下面一些环境可能需要科学上网，创建k8s集群需要如下包
docker – 容器运行环境 kubelet – Kubernets节点代理 kubeadm – 部署多节点Kubernetes集群的工具 kubectl – 用于和Kubernetes交互的命令行工具 会创建如下3台机器
主机名 IP地址 角色 master.k8s 10.0.0.175 主节点 node1.k8s 10.0.0.176 工作节点1 node2.k8s 10.0.0.177 工作节点2 记一下安装时最新的版本号
ubuntu server 20.04.1 kernel version 5.4.0 kubernetes v1.20.0 docker-ce 19.03.14 创建虚拟机配置网址和安装docker 首先在ESXi控制台创建一台ubuntu server虚拟机，配置建议2CPU、2G RAM、20G硬盘，主机名为master.k8s开机更新到最新版本后重启安装docker，切换到root用户，以下所有操作都用root用户
修改主机名
# set hostname hostnamectl set-hostname master.k8s 然后修改/etc/hosts域名解析并添加之后两台的ip地址，如下
10.0.0.175 master.k8s 10.0.0.176 node1.k8s 10.0.0.177 node2.k8s 配置主节点的网络修改/etc/netplan/00-installer-config.yaml如下，我这网卡是ens160
network: version: 2 renderer: networkd ethernets: ens160: # change your&#39;s dhcp4: no addresses: [10.0.0.175/24] # change your&#39;s gateway4: 10.0.0.1 # change your&#39;s nameservers: addresses: [10.0.0.1] # change your&#39;s 保存后运行
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-12-23 13:16:29 +0800 +0800'>December 23, 2020</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;504 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to 使用kubeadm在虚拟机本地搭建Kubernetes集群" href="https://blog.fangjiahui.me/posts/2020-12-23-creating-a-kubernetes-cluster-with-kubeadm/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">正则表达式中的预查
    </h2>
  </header>
  <div class="entry-content">
    <p>正则表达式中的预查 有时候使用正则会用到非获取匹配，就是不进行存储供以后使用，也就是正则中的预查，预查分为正向预查(lookahead)和反向预查(lookbehind)。
正向预查
(?=pattern)正向肯定预查(Positive lookahead)。如Python(?=3)匹配Python后跟3的语句，如输入Python3但其中最后的3不算进结果，返回Python
(?!pattern)正向否定预查(Negative lookahead)。和上面的类似只是否定的，Python(?!3)匹配后面不带3的句子，输入Python2，也是返回Python
反向预查
(?&lt;=pattern)反向肯定预查(Positive lookbehind)。如(?&lt;=2)Python其实和上面也差不多反向就是向左匹配就是匹配Python前面是2的语句，如输入2Python，返回Python
(?&lt;!pattern)反向否定预查(Negative lookbehind)。如(?&lt;!3)Python匹配Python前面不是3的输入，如输入2Python，返回Python
还有一个长的挺像的这里也记录下
(?:pattern) 匹配pattern但不获取匹配结果。 (?:t|b)oy只匹配boy或者toy，和toy|boy一样但更简洁，当然如果使用(t|b)oy就会多一个group
</p>
  </div>
  <footer class="entry-footer"><span title='2020-10-27 10:04:12 +0800 +0800'>October 27, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;16 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to 正则表达式中的预查" href="https://blog.fangjiahui.me/posts/2020-10-27-regular-expression-lookarounds/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://blog.fangjiahui.me/page/2/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://blog.fangjiahui.me/page/4/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://blog.fangjiahui.me/">Fython&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>

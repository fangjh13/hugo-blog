<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.140.0"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Fython&#39;s Blog</title>

<meta name="description" content="My Personal Blog Site">
<meta name="author" content="Fython">
<link rel="canonical" href="https://blog.fangjiahui.me/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fe5e2aabdfff8eb553d92fe38c9df2462232b65718e9a34fc328f56fa92ba5fc.css" integrity="sha256-/l4qq9//jrVT2S/jjJ3yRiIytlcY6aNPwyj1b6krpfw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.fangjiahui.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.fangjiahui.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.fangjiahui.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.fangjiahui.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.fangjiahui.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.fangjiahui.me/index.xml">
<link rel="alternate" type="application/json" href="https://blog.fangjiahui.me/index.json">
<link rel="alternate" hreflang="en" href="https://blog.fangjiahui.me/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://blog.fangjiahui.me/">
  <meta property="og:site_name" content="Fython&#39;s Blog">
  <meta property="og:title" content="Fython&#39;s Blog">
  <meta property="og:description" content="My Personal Blog Site">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
      <meta property="og:image" content="https://blog.fangjiahui.me/blog-cover-1.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.fangjiahui.me/blog-cover-1.png">
<meta name="twitter:title" content="Fython&#39;s Blog">
<meta name="twitter:description" content="My Personal Blog Site">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Fython's Blog",
  "url": "https://blog.fangjiahui.me/",
  "description": "My Personal Blog Site",
  "logo": "https://blog.fangjiahui.me/favicon.ico",
  "sameAs": [
      "https://github.com/fangjh13", "index.xml"
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.fangjiahui.me/" accesskey="h" title="Fython&#39;s Blog (Alt + H)">Fython&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.fangjiahui.me/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://blog.fangjiahui.me/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">XPath语法
    </h2>
  </header>
  <div class="entry-content">
    <p>XPath语法 XPath是在XML中检索信息的语言，也就是遍历XML文档，找出有用的信息。这里记录下XPath的语法
选取节点 XPath 使用路径表达式在 XML 文档中选取节点。节点是通过沿着路径或者 step 来选取的。
表达式 描述 nodename 选取此节点的所有子节点 / 从根节点选取 // 从整个文档选取，不考虑它们的位置 . 选取当前节点 .. 选取当前节点的父节点 @ 选取属性 实例 &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;bookstore&gt; &lt;book category=&#34;cooking&#34;&gt; &lt;title lang=&#34;en&#34;&gt;Everyday Italian&lt;/title&gt; &lt;author&gt;Giada De Laurentiis&lt;/author&gt; &lt;year&gt;2005&lt;/year&gt; &lt;price&gt;30.00&lt;/price&gt; &lt;/book&gt; &lt;book category=&#34;children&#34;&gt; &lt;title lang=&#34;zh&#34;&gt;哈利波特&lt;/title&gt; &lt;author&gt;J K. Rowling&lt;/author&gt; &lt;year&gt;2005&lt;/year&gt; &lt;price&gt;29.99&lt;/price&gt; &lt;/book&gt; &lt;book category=&#34;web&#34;&gt; &lt;title lang=&#34;en&#34;&gt;XQuery Kick Start&lt;/title&gt; &lt;author&gt;James McGovern&lt;/author&gt; &lt;author&gt;Per Bothner&lt;/author&gt; &lt;author&gt;Kurt Cagle&lt;/author&gt; &lt;author&gt;James Linn&lt;/author&gt; &lt;author&gt;Vaidyanathan Nagarajan&lt;/author&gt; &lt;year&gt;2003&lt;/year&gt; &lt;price&gt;49.99&lt;/price&gt; &lt;/book&gt; &lt;book category=&#34;web&#34; cover=&#34;paperback&#34;&gt; &lt;title lang=&#34;en&#34;&gt;Learning XML&lt;/title&gt; &lt;author&gt;Erik T. Ray&lt;/author&gt; &lt;year&gt;2003&lt;/year&gt; &lt;price&gt;39.95&lt;/price&gt; &lt;/book&gt; &lt;/bookstore&gt; 路径表达式 结果 bookstore 选取 bookstore 元素的所有子节点 /bookstore 选取根元素 bookstore/book 选取属于 bookstore 的子元素的所有 book 元素 //book 选取所有 book 子元素，而不管它们在文档中的位置 bookstore//book 选择属于 bookstore 元素的后代的所有 book 元素，而不管它们位于 bookstore 之下的什么位置。 //@lang 选取名为 lang 的所有属性 使用上面的xml文档作为测试，node.js可以使用xpath，Python可以使用lxml库
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-06-01 03:23:12 +0800 +0800'>June 1, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;372 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to XPath语法" href="https://blog.fangjiahui.me/posts/2018-06-01-xpath-syntax/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">使用usb转TTL(PL2303模块) 串口连接树莓派3B
    </h2>
  </header>
  <div class="entry-content">
    <p>使用 usb 转 TTL(PL2303 模块) 串口连接树莓派 3B By default, on Raspberry Pis equipped with the wireless/Bluetooth module (Raspberry Pi 3 and Raspberry Pi Zero W), the PL011 UART is connected to the BT module, while the mini UART is used for Linux console output. On all other models the PL011 is used for the Linux console output.
在树莓派 3 以前，官方是将“硬件串口”分配给 GPIO 中的 UART(GPIO14&amp;GPIO15)，因此可以独立调整串口的速率和模式，直接连接就可以。而在 3 以后的树莓派中因为新增了蓝牙使用掉了 UART。这样默认就不开启了，以下是手动开启的方法。
使用 HDMI 启动树莓派编辑/boot/config.txt在后面新增以下两行
# 激活串口输出 enable_uart=1 # 禁用蓝牙 dtoverlay=pi3-disable-bt 运行sudo systemctl disable hciuart禁用蓝牙服务，然后重启
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-04-02 12:41:09 +0800 +0800'>April 2, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;120 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to 使用usb转TTL(PL2303模块) 串口连接树莓派3B" href="https://blog.fangjiahui.me/posts/2018-04-02-raspberry-pi-3b-uart-serial-connect/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">collections模块中的namedtuple和defaultdict
    </h2>
  </header>
  <div class="entry-content">
    <p>collections模块中的namedtuple和defaultdict collections模块是Python中对内置类型(dict, list, tuple)的拓展。就是说它们本身具有普通内置类型的所有特性，并添加了新的功能。
namedtuple() namedtuple(typename, field_names)是tuple的子类，定义的元组可以通过属性访问，也易于理解，self-document。field_names可以是列表或者是通过空格或者逗号分隔的字符串。
&gt;&gt;&gt; from collections import namedtuple &gt;&gt;&gt; Point = namedtuple(&#39;point&#39;, &#39;x, y&#39;) &gt;&gt;&gt; p = Point(3, y=4) &gt;&gt;&gt; p point(x=3, y=4) &gt;&gt;&gt; p[0] 3 &gt;&gt;&gt; p.x 3 &gt;&gt;&gt; x, y = p &gt;&gt;&gt; print(x, y) 3 4 namedtuple有几个比较有用的方法和属性
SomeNamedTuple._make(iterable)类方法，从可迭代对象中取值，长度必须和传入的field_names一致，返回一个新的对象 somenamedtuple._asdict()方法返回一个有序字典(OrderedDict) somenamedtuple._replace(**kwargs)方法替换值，返回一个新的对象，原来的不变 somenamedtuple._fields属性返回键名(field name)，可用于创建新的named tuple 再来看两个官方文档上的例子读取csv文件或者从sqlite读取
EmployeeRecord = namedtuple(&#39;EmployeeRecord&#39;, &#39;name, age, title, department, paygrade&#39;) import csv for emp in map(EmployeeRecord._make, csv.reader(open(&#34;employees.csv&#34;, &#34;rb&#34;))): print(emp.name, emp.title) import sqlite3 conn = sqlite3.connect(&#39;/companydata&#39;) cursor = conn.cursor() cursor.execute(&#39;SELECT name, age, title, department, paygrade FROM employees&#39;) for emp in map(EmployeeRecord._make, cursor.fetchall()): print(emp.name, emp.title) defaultdict defaultdict([default_factory[,...]])顾名思义继承自dict它接收一个函数(default_factory)作为参数但它除了dict所有的属性和方法外，另外加了__missing__方法和default_factory属性。这两个的作用就是访问不存在的key时它会新增一个key，value为调用default_factory的值。
&gt;&gt;&gt; from collections import defaultdict &gt;&gt;&gt; d = defaultdict(list) # 默认函数为list &gt;&gt;&gt; print(d.items()) # 创建空字典 dict_items([]) &gt;&gt;&gt; d.default_factory &lt;class &#39;list&#39;&gt; &gt;&gt;&gt; d[&#39;key&#39;] # 调用会设置该key的值为空list并返回 [] &gt;&gt;&gt; print(d.items()) dict_items([(&#39;key&#39;, [])]) 我们可以利用这个特性来做很多事，比如说给一个包含元组的的列表分类整理。
&gt;&gt;&gt; s = [(&#39;yellow&#39;, 1), (&#39;blue&#39;, 2), (&#39;yellow&#39;, 3), (&#39;blue&#39;, 4), (&#39;red&#39;, 1)] &gt;&gt;&gt; d = defaultdict(list) &gt;&gt;&gt; for k, v in s: ... d[k].append(v) &gt;&gt;&gt; sorted(d.items()) [(&#39;blue&#39;, [2, 4]), (&#39;red&#39;, [1]), (&#39;yellow&#39;, [1, 3])] 上面的代码其实可以用dict的setdefault实现，但效率和可读性差点，如下
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-02-09 15:17:02 +0800 +0800'>February 9, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;244 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to collections模块中的namedtuple和defaultdict" href="https://blog.fangjiahui.me/posts/2018-02-09-python-collections-namedtuple-and-defaultdict/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Python中的特殊方法
    </h2>
  </header>
  <div class="entry-content">
    <p>Python 中的特殊方法 python 在定义 class 时有很多特殊方法可以定义，它们一般都是以双下划线开头和结尾如__init__、__call__、__lt__、__iter__、__setattr__、__setitem__等，下面将对这些常用方法作一些总结。
class 基本方法 __new__(cls[, ...]) 我们都知道__init__会在类初始化的时候被调用其实它不是第一个被调用的，第一个是__new__会在对象创建的时候被调用，这时还没有实例化所以它的第一个参数是cls。
__init__(self[, ...]) 最常用的类方法不用过多介绍，对象初始化时自动调用，也就是在__new__之后才会调用。第一个参数是self实例本身。有一点要注意的是它不能返回(return)值，不然会报TypeError记住它是用来初始化对象的。
class A: def __new__(cls): print(&#39;__new__ called&#39;) return super(A, cls).__new__(cls) def __init__(self): print(&#39;__init__ called&#39;) a = A() 返回如下，注意这是 Python3 的写法默认A继承自object，如果使用 Python2 的需要指定A继承自object基类，使用新类。不然__new__是不会被调用的。
__new__ called __init__ called 需要注意的是上面我们定义了__new__接收类对象(cls)，必须返回return super(A, cls).__new__(cls)这个类实例也就是下面方法的self，因为__new__会被首先调用返回实例对象以供下面的方法如__init__这些使用。如果去掉这一句其他方法会返回None。默认未定义__new__方法时，默认返回父类实例super().__new__(cls, *args, **kwargs)
__str__(self) 调用print(obj)或str(obj)时返回的字符串是对人类友好的(human readable string)。
__repr__(self) 调用repr(obj)或obj返回的字符串，比较偏向机器。
__format__(self, format_spec) 调用f string或format时调用，format(value, format_spec)相当于value.__format__(format_spec)
class Animal: def __init__(self, name): self.name = name def __format__(self, format_spec): if format_spec == &#39;view&#39;: return f&#34;this is {self.name}&#34; else: raise ValueError(&#39;invalid format spec.&#39;) dog = Animal(&#39;Labrador&#39;) print(format(dog, &#34;view&#34;)) print(&#34;{0:view}&#34;.format(dog)) print(f&#34;{dog:view}&#34;) 三种方式返回都一样如下
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-01-28 05:36:12 +0800 +0800'>January 28, 2018</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;588 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to Python中的特殊方法" href="https://blog.fangjiahui.me/posts/2018-01-28-python-magical-special-methods/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">配置SSH agent 和 SSH agent forwarding转发
    </h2>
  </header>
  <div class="entry-content">
    <p>0x01. ssh-agent转发 经常使用SSH而且私钥设置了passphrase的同学会遇到一个问题，就是每次登录主机都要输入一遍passphrase会很麻烦，这时ssh-agent命令就有用了。
ssh-agent是OpenSSH默认自带的并且在后台一直运行的daemon。假设已经通过ssh-keygen生成了自己的私钥，可以在GitHub上传公钥后使用ssh -T git@github.com命令测试通过。
$ ssh-agent SSH_AUTH_SOCK=/var/folders/k6/k5s6nj_j2k70jzp7plv120y40000gn/T//ssh-fcn9OCl9La13/agent.2462; export SSH_AUTH_SOCK; SSH_AGENT_PID=2463; export SSH_AGENT_PID; echo Agent pid 2463; 但上面的命令没用，我们需要eval命令导入环境变量
$ eval $(ssh-agent) Agent pid 2533 $ echo $SSH_AGENT_PID 2553 $ echo $SSH_AUTH_SOCK /var/folders/k6/k5s6nj_j2k70jzp7plv120y40000gn/T//ssh-6bHKwvKJ6AO1/agent.2532 ssh-agent已经运行了，最后需要把私钥加入cache。
$ ssh-add ~/.ssh/id_rsa Enter passphrase for /Users/fython/.ssh/id_rsa: Identity added: /Users/fython/.ssh/id_rsa (/Users/fython/.ssh/id_rsa) 可以使用ssh-add -l查看缓存的私钥。现在再登录使用公钥认证的主机不需要输入passphrase了。
这个每次开机都要运行一遍上面的命令好像有点麻烦，值得高兴的是大多数的linux发行版都在登录图形界面时都会启动一个ssh-agent进程，你不需要任何操作，可以使用ps -ef | grep ssh-agent查看。如果你的系统没有这个功能，请在~/.xsession文件中加入：
ssh-agent gnome-session Note：请使用你自己的窗口管理器取代gnome-session。
本人使用Arch，i3桌面环境的时候需要在～/.profile中加入才能启用
export $(gnome-keyring-daemon --start --components=secrets,ssh) 0x02. 使用SSH agent forwarding多机器转发 设想一下当你有两台server如A和B，你都可以ssh上去但你已经登入了上了A想从A上面ssh到B又不想将私钥上传到A该怎么办，一个很好的办法是开启ForwardAgent yes。
修改全局配置/etc/ssh/ssh_config或修改个人~/.ssh/config配置推荐第二种，没有就新建文件，然后加入
Host * ForwardAgent yes 最后去A和B服务器上~/.ssh/config也加入如上的配置。现在可以愉快的在A上免密连接到B了，当然在B上面也可以ssh到A，其实只要在服务器配置中加入了ForwardAgent yes这样就能传递了。
0x03. 在MacOS上的设置 由于MacOS上每次开机都会忘记Key，只要在~/.ssh/config中添加如下配置即可和实现上面的效果
Host * AddKeysToAgent yes UseKeychain yes ForwardAgent yes IdentityFile ~/.ssh/id_rsa 或者手动运行ssh-add -K yourkey将key加入到Keychain也可以。
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-12-27 03:00:27 +0800 +0800'>December 27, 2017</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;93 words&nbsp;·&nbsp;Fython</footer>
  <a class="entry-link" aria-label="post link to 配置SSH agent 和 SSH agent forwarding转发" href="https://blog.fangjiahui.me/posts/2017-12-27-ssh-agent-and-ssh-agent-forwarding/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://blog.fangjiahui.me/page/6/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://blog.fangjiahui.me/page/8/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://blog.fangjiahui.me/">Fython&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
